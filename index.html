<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="./icons8-youtube-100.png" type="image/x-icon" />
  <title>YouTube Clone </title>

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
     href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />"
    integrity="sha512-QWW4UH8XM4+tfrQSYGkLo6JZstbNG8nr/QJvaLMKcKJsl+1l5ohoxjZGQwIuesXlMoPucMnWpvKKm2CmkSFbw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <!-- HEADER -->
  <header class="header" role="banner">
    <button class="menu-btn" id="menu-btn" aria-label="Toggle sidebar">
      <i class="fa-solid fa-bars"></i>
    </button>

    <a href="index.html" class="logo" aria-label="YouTube Clone Home">
      <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="YouTube Logo" />
    </a>

    <form class="search-bar" role="search">
      <input type="search" placeholder="Search" aria-label="Search videos" />
      <button type="submit" aria-label="Submit search">
        <i class="fa-solid fa-magnifying-glass"></i>
      </button>
    </form>

    <div class="header-icons">
      <button class="icon-btn" aria-label="Search with voice">
        <i class="fa-solid fa-microphone"></i>
      </button>
      <button class="icon-btn" aria-label="Create video">
        <i class="fa-solid fa-video"></i>
      </button>
      <button class="icon-btn" aria-label="Notifications">
        <i class="fa-solid fa-bell"></i>
      </button>
      <button class="avatar-btn" aria-label="User account">
        <img src="./ae7d4159-a1eb-474e-81e6-08ab4d08f0bd.jpeg" alt="User Avatar" class="avatar" />
      </button>
    </div>
  </header>

  <!-- CATEGORY BAR -->
  <nav class="categories" role="navigation" aria-label="Video categories">
    <button class="sidebar-toggle-mobile" id="sidebar-toggle-mobile" aria-label="Toggle sidebar">
      <i class="fa-solid fa-chevron-right"></i>
    </button>
    <button class="category-btn active" data-category="all">All</button>
    <button class="category-btn" data-category="music">Music</button>
    <button class="category-btn" data-category="mixes">Mixes</button>
    <button class="category-btn" data-category="gaming">Gaming</button>
    <button class="category-btn" data-category="podcasts">Podcasts</button>
    <button class="category-btn" data-category="live">Live</button>
  </nav>

  <!-- CONTAINER -->
  <div class="container">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation">
      <ul class="sidebar-menu">
        <li><a href="index.html" class="sidebar-link active" aria-current="page"><i class="fa-solid fa-house"></i> <span>Home</span></a></li>
        <li><a href="trending.html" class="sidebar-link"><i class="fa-solid fa-fire"></i> <span>Trending</span></a></li>
        <li><a href="subscriptions.html" class="sidebar-link"><i class="fa-solid fa-folder-open"></i> <span>Subscriptions</span></a></li>
        <li><a href="shorts.html" class="sidebar-link"><i class="fa-solid fa-bolt"></i> <span>Shorts</span></a></li>
        <li><a href="library.html" class="sidebar-link"><i class="fa-solid fa-photo-film"></i> <span>Library</span></a></li>
        <li><a href="history.html" class="sidebar-link"><i class="fa-solid fa-clock-rotate-left"></i> <span>History</span></a></li>
      </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content" id="video-container" role="main">
      <!-- Sample Video Card -->
      <article class="video-card">
        <a href="video.html" class="video-thumbnail">
          <iframe src="https://www.youtube.com/embed/Z1XBvAq7mno" title="YouTube video player" allowfullscreen></iframe>
        </a>
        <div class="video-info">
          <a href="video.html" class="video-title">EVERY Detail in Attack on Titan (Season 4)</a>
          <a href="https://www.youtube.com/@DJLYTA" target="_blank" rel="noopener noreferrer" class="channel">DJ LYTA</a>
          <p class="meta">69K views • 2 months ago</p>
        </div>
      </article>

      <article class="video-card">
        <a href="video.html" class="video-thumbnail">
          <iframe src="https://www.youtube.com/embed/-pbOxgwDuIc" title="YouTube video player" allowfullscreen></iframe>
        </a>
        <div class="video-info">
          <a href="video.html" class="video-title">EVERY. Last. Detail in Attack on Titan (40 Minutes)</a>
          <a href="https://www.youtube.com/@AnimeQuota" target="_blank" rel="noopener noreferrer" class="channel">AnimeQuota</a>
          <p class="meta">860K views • 1 week ago</p>
        </div>
      </article>
    </main>
  </div>

  <!-- FOOTER -->
  <footer class="footer" role="contentinfo">
    <nav class="footer-links" aria-label="Footer links">
      <a href="#" rel="noopener noreferrer"><i class="fa-regular fa-circle-question"></i> <span>About</span></a>
      <a href="#" rel="noopener noreferrer"><i class="fa-regular fa-envelope"></i> <span>Contact</span></a>
      <a href="#" rel="noopener noreferrer"><i class="fa-solid fa-file-contract"></i> <span>Terms</span></a>
      <a href="#" rel="noopener noreferrer"><i class="fa-solid fa-lock"></i> <span>Privacy</span></a>
    </nav>
  </footer>

  <!-- LOADING INDICATOR -->
  <div class="loading-indicator" id="loading-indicator" style="display: none;">
    <div class="spinner"></div>
  </div>

  <!-- SCRIPT -->
  <script>
    // DOM Elements
    const menuBtn = document.getElementById("menu-btn");
    const sidebar = document.getElementById("sidebar");
    const sidebarToggleMobile = document.getElementById("sidebar-toggle-mobile");
    const videoContainer = document.getElementById("video-container");
    const loadingIndicator = document.getElementById("loading-indicator");
    const categoryButtons = document.querySelectorAll(".category-btn");

    // State variables
    let isLoading = false;
    let scrollTimeout;
    let isSidebarOpen = false;

    // Toggle sidebar on menu button click (header)
    menuBtn.addEventListener("click", () => {
      sidebar.classList.toggle("show");
      isSidebarOpen = sidebar.classList.contains("show");
      sidebarToggleMobile.classList.toggle("active", isSidebarOpen);
    });

    // Toggle sidebar on mobile toggle button click (categories bar)
    sidebarToggleMobile.addEventListener("click", () => {
      sidebar.classList.toggle("show");
      isSidebarOpen = sidebar.classList.contains("show");
      sidebarToggleMobile.classList.toggle("active", isSidebarOpen);
    });

    // Close sidebar when a link is clicked
    document.querySelectorAll(".sidebar-link").forEach(link => {
      link.addEventListener("click", () => {
        sidebar.classList.remove("show");
        isSidebarOpen = false;
        sidebarToggleMobile.classList.remove("active");
      });
    });

    // Category button click handlers
    categoryButtons.forEach(button => {
      button.addEventListener("click", () => {
        categoryButtons.forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");
      });
    });

    // Debounced infinite scroll with improved performance
    window.addEventListener("scroll", () => {
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(() => {
        if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 300) {
          if (!isLoading) {
            loadMoreVideos();
          }
        }
      }, 100);
    });

    // Load more videos dynamically
    function loadMoreVideos() {
      isLoading = true;
      loadingIndicator.style.display = "flex";

      // Simulate network delay
      setTimeout(() => {
        const videoData = [
          { id: "dQw4w9WgXcQ", title: "Popular Video 1", channel: "Channel Name", views: "100K", time: "2 days ago" },
          { id: "jNQXAC9IVRw", title: "Popular Video 2", channel: "Creator", views: "250K", time: "1 week ago" },
          { id: "Z1XBvAq7mno", title: "Trending Video", channel: "DJ LYTA", views: "500K", time: "3 days ago" },
          { id: "-pbOxgwDuIc", title: "Latest Release", channel: "AnimeQuota", views: "1.2M", time: "5 days ago" }
        ];

        videoData.forEach(video => {
          const card = document.createElement("article");
          card.classList.add("video-card");
          card.innerHTML = `
            <a href="video.html" class="video-thumbnail">
              <iframe src="https://www.youtube.com/embed/${video.id}" title="${video.title}" allowfullscreen></iframe>
            </a>
            <div class="video-info">
              <a href="video.html" class="video-title">${video.title}</a>
              <a href="#" class="channel">${video.channel}</a>
              <p class="meta">${video.views} views • ${video.time}</p>
            </div>`;
          videoContainer.appendChild(card);
        });

        isLoading = false;
        loadingIndicator.style.display = "none";
      }, 500);
    }

    // Close sidebar on mobile when clicking outside
    document.addEventListener("click", (e) => {
      if (window.innerWidth <= 768 && !sidebar.contains(e.target) && !menuBtn.contains(e.target) && !sidebarToggleMobile.contains(e.target)) {
        sidebar.classList.remove("show");
        isSidebarOpen = false;
        sidebarToggleMobile.classList.remove("active");
      }
    });
  </script>
</body>
</html>
